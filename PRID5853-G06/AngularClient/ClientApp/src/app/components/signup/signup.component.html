<form [formGroup]="frm" novalidate>
  <h1>Sign Up</h1>
  <mat-card class="parent">
    <mat-card-title>SignUp Form</mat-card-title>
      <mat-list>
        <!--Pseudo-->
        <mat-list-item>
          <mat-form-field>
            <input matInput placeholder="Pseudo" [formControl]="ctlPseudo" required appSetFocus>
            <mat-error class="float-right" *ngIf="ctlPseudo.hasError('required')">Required</mat-error>
            <mat-error class="float-right" *ngIf="ctlPseudo.hasError('minlength')">
              Minimum length is
              {{ctlPseudo.errors['minlength'].requiredLength}}
            </mat-error>
            <mat-error class="float-right" *ngIf="ctlPseudo.hasError('maxlength')">
              Maximum length is
              {{ctlPseudo.errors['maxlength'].requiredLength}}
            </mat-error>
            <mat-error class="float-right" *ngIf="ctlPseudo.hasError('pseudoUsed')">This pseudo is not available</mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--Email-->
        <mat-list-item>
          <mat-form-field>
            <input type="email" matInput placeholder="Email" [formControl]="ctlEmail" required autocomplete="new-email">
            <mat-error class="float-right" *ngIf="ctlEmail.hasError('required')">Required</mat-error>
            <mat-error class="float-right" *ngIf="ctlEmail.hasError('pattern')">Invalid Email address</mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--FirstName-->
        <mat-list-item>
          <mat-form-field>
            <input matInput placeholder="FirstName" [formControl]="ctlFirstName">
            <mat-error class="float-right" *ngIf="ctlFirstName.hasError('minlength')">
              Minimum length is
              {{ctlFirstName.errors['minlength'].requiredLength}}
            </mat-error>
            <mat-error class="float-right" *ngIf="ctlFirstName.hasError('maxlength')">
              Maximum length is
              {{ctlFirstName.errors['maxlength'].requiredLength}}
            </mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--LastName-->
        <mat-list-item>
          <mat-form-field>
            <input matInput placeholder="LastName" [formControl]="ctlLastName">
            <mat-error class="float-right" *ngIf="ctlLastName.hasError('minlength')">
              Minimum length is
              {{ctlLastName.errors['minlength'].requiredLength}}
            </mat-error>
            <mat-error class="float-right" *ngIf="ctlLastName.hasError('maxlength')">
              Maximum length is
              {{ctlLastName.errors['maxlength'].requiredLength}}
            </mat-error>
            <mat-error class="float-right" *ngIf="ctlLastName.hasError('required')">Required</mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--BirtDate-->
        <!--To add: Validation +18-->
        <mat-list-item>
          <mat-form-field>
            <input matInput [formControl]="ctlBirthDate" [matDatepicker]="picker" placeholder="Date of birth" [min]="minDate" [max]="maxDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            
            <mat-error class="float-right" *ngIf="ctlBirthDate.hasError('matDatepickerMax') ">Invalid date -> Must be > 18 years old</mat-error>
            <mat-error class="float-right" *ngIf="ctlBirthDate.hasError('matDatepickerMin') ">Invalid date -> Must be < 100 years old</mat-error>
            <mat-error class="float-right" *ngIf="ctlBirthDate.invalid && !ctlBirthDate.hasError('matDatepickerMin') && !ctlBirthDate.hasError('matDatepickerMax')">Invalid date -> MM/DD/AAAA</mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--PassWord-->
        <mat-list-item>
          <mat-form-field>
            <input type="password" matInput placeholder="Password" [formControl]="ctlPassword" required autocomplete="new-password">
            <mat-error class="float-right" *ngIf="ctlPassword.hasError('required')">Required</mat-error>
            <mat-error class="float-right" *ngIf="ctlPassword.hasError('minlength')">
              Minimum length is
              {{ctlPassword.errors['minlength'].requiredLength}}
            </mat-error>
          </mat-form-field>
        </mat-list-item>
        <!--Password Confirmation-->
        <mat-list-item>
          <mat-form-field>
            <input type="password" matInput placeholder="Confirm Password" [formControl]="ctlPasswordConfirm" required>
            <mat-error class="float-right" *ngIf="ctlPasswordConfirm.hasError('required')">Required</mat-error>
            <mat-error class="float-right" *ngIf="ctlPasswordConfirm.hasError('minlength')">
              Minimum length is
              {{ctlPasswordConfirm.errors['minlength'].requiredLength}}
            </mat-error>
          </mat-form-field>
          <div *ngIf="frm.errors && ctlPasswordConfirm.dirty && ctlPasswordConfirm.valid">
            <mat-error class="float-left" *ngIf="frm.hasError('passwordNotConfirmed')">The passwords don't match</mat-error>
          </div>
        </mat-list-item>
      </mat-list>
  </mat-card>
  <div>
    <button mat-raised-button  color="accent" (click)="signup()" [disabled]="!frm.valid">
    <mat-icon>loyalty</mat-icon>
    <span>Sign Up</span>
    </button>
  </div>
</form>
